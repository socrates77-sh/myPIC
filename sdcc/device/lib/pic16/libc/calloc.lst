gpasm-0.14.1 (Aug 18 2017)   calloc.asm         8-18-2017  19:21:50          PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;--------------------------------------------------------
                      00002 ; File Created by SDCC : free open source ANSI-C Compiler
                      00003 ; Version 3.2.0 #8004 (Aug 18 2017) (MINGW32)
                      00004 ; This file was generated Fri Aug 18 19:21:50 2017
                      00005 ;--------------------------------------------------------
                      00006 ; PIC16 port for the Microchip 16-bit core micros
                      00007 ;--------------------------------------------------------
                      00008         list    p=18f452
                      00009 
                      00010         radix dec
                      00011 
                      00012 ;--------------------------------------------------------
                      00013 ; public variables in this module
                      00014 ;--------------------------------------------------------
                      00015         global  _calloc
                      00016 
                      00017 ;--------------------------------------------------------
                      00018 ; extern variables in this module
                      00019 ;--------------------------------------------------------
                      00020         extern  _heap
                      00021         extern  _malloc
                      00022 
                      00023 ;--------------------------------------------------------
                      00024 ;       Equates to used internal registers
                      00025 ;--------------------------------------------------------
  00000FD8            00026 STATUS  equ     0xfd8
  00000FE8            00027 WREG    equ     0xfe8
  00000FE9            00028 FSR0L   equ     0xfe9
  00000FEA            00029 FSR0H   equ     0xfea
  00000FE1            00030 FSR1L   equ     0xfe1
  00000FD9            00031 FSR2L   equ     0xfd9
  00000FEF            00032 INDF0   equ     0xfef
  00000FE6            00033 POSTINC1        equ     0xfe6
  00000FE5            00034 POSTDEC1        equ     0xfe5
  00000FE4            00035 PREINC1 equ     0xfe4
  00000FDB            00036 PLUSW2  equ     0xfdb
  00000FF3            00037 PRODL   equ     0xff3
                      00038 
                      00039 
                      00040 ; Internal registers
                      00041 .registers      udata_ovr       0x0000
000000                00042 r0x00   res     1
000001                00043 r0x01   res     1
000002                00044 r0x02   res     1
000003                00045 r0x03   res     1
000004                00046 r0x04   res     1
                      00047 
                      00048 ;--------------------------------------------------------
                      00049 ; global & static initialisations
                      00050 ;--------------------------------------------------------
                      00051 ; I code from now on!
                      00052 ; ; Starting pCode block
                      00053 ; ;ic:1:  _entry($9) :
gpasm-0.14.1 (Aug 18 2017)   calloc.asm         8-18-2017  19:21:50          PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00054 ; ;ic:2:        proc _calloc [k1 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char near* function ( unsigned-char fixed) data}
                      00055 S_calloc__calloc        code
000000                00056 _calloc:
                      00057 ;       .line   33; stdlib/calloc.c     unsigned char _MALLOC_SPEC *calloc(unsigned char len)
000000 CFD9 FFE5      00058         MOVFF   FSR2L, POSTDEC1
000004 CFE1 FFD9      00059         MOVFF   FSR1L, FSR2L
000008 C000 FFE5      00060         MOVFF   r0x00, POSTDEC1
00000C C000 FFE5      00061         MOVFF   r0x01, POSTDEC1
000010 C000 FFE5      00062         MOVFF   r0x02, POSTDEC1
000014 C000 FFE5      00063         MOVFF   r0x03, POSTDEC1
000018 C000 FFE5      00064         MOVFF   r0x04, POSTDEC1
                      00065 ; ;ic:3: iTemp0 [k2 lr3:12 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _calloc_len_1_9}[r0x00 ] = recv _calloc [k1 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char near* function ( unsigned-char fixed) data}
00001C 0E02           00066         MOVLW   0x02
00001E CFDB F000      00067         MOVFF   PLUSW2, r0x00
                      00068 ; ;ic:4:        iTemp1 [k4 lr4:5 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{char fixed} = iTemp0 [k2 lr3:12 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _calloc_len_1_9}[r0x00 ] < 0x7f {const-unsigned-char literal}
                      00069 ;       .line   37; stdlib/calloc.c     if (len >= MAX_BLOCK_SIZE) return ((unsigned char _MALLOC_SPEC *)0);
000022 0E7F           00070         MOVLW   0x7f
000024 5C00           00071         SUBWF   r0x00, W
000026 E300           00072         BNC     _00106_DS_
                      00073 ; ;ic:5:        if iTemp1 [k4 lr4:5 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{char fixed} != 0 goto _iffalse_0($2)
                      00074 ; ;ic:6:        ret 0x0 {unsigned-char near* literal}
000028 6AF3           00075         CLRF    PRODL
00002A 6AE8           00076         CLRF    WREG
00002C D000           00077         BRA     _00112_DS_
                      00078 ; ;ic:7:  _iffalse_0($2) :
                      00079 ; ;ic:8:        send iTemp0 [k2 lr3:12 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _calloc_len_1_9}[r0x00 ]{argreg = 1}
                      00080 ; ;ic:9:        iTemp2 [k5 lr9:13 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char near* fixed}{ sir@ _calloc_ch_1_10}[r0x01 r0x02 ] = call _malloc [k7 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char near* function ( unsigned-char fixed) fixed}
00002E                00081 _00106_DS_:
                      00082 ;       .line   38; stdlib/calloc.c     ch = malloc( len );
00002E 5000           00083         MOVF    r0x00, W
000030 6EE5           00084         MOVWF   POSTDEC1
000032 EC00 F000      00085         CALL    _malloc
000036 6E00           00086         MOVWF   r0x01
000038 CFF3 F000      00087         MOVFF   PRODL, r0x02
00003C 52E6           00088         MOVF    POSTINC1, F
                      00089 ; ;ic:10:       iTemp4 [k10 lr10:22 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char near* fixed}{ sir@ _calloc_result_1_10}[r0x03 r0x04 ] := iTemp2 [k5 lr9:13 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char near* fixed}{ sir@ _calloc_ch_1_10}[r0x01 r0x02 ]
                      00090 ;       .line   39; stdlib/calloc.c     result = ch;
00003E C000 F000      00091         MOVFF   r0x01, r0x03
000042 C000 F000      00092         MOVFF   r0x02, r0x04
                      00093 ; ;ic:11:       if iTemp2 [k5 lr9:13 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char near* fixed}{ sir@ _calloc_ch_1_10}[r0x01 r0x02 ] == 0 goto _iffalse_1($7)
                      00094 ;       .line   41; stdlib/calloc.c     if (result != 0) {
000046 1000           00095         IORWF   r0x02, W
000048 E000           00096         BZ      _00111_DS_
                      00097 ; ;ic:12:       iTemp5 [k12 lr12:20 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char fixed}[r0x00 ] := iTemp0 [k2 lr3:12 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _calloc_len_1_9}[r0x00 ]
                      00098 ; ;ic:13:       iTemp8 [k15 lr13:20 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char near* fixed}[r0x01 r0x02 ] := iTemp2 [k5 lr9:13 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char near* fixed}{ sir@ _calloc_ch_1_10}[r0x01 r0x02 ]
                      00099 ; ;ic:15:  _whilecontinue_0($3) :
                      00100 ; ;ic:16:       if iTemp5 [k12 lr12:20 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char fixed}[r0x00 ] == 0 goto _iffalse_1($7)
00004A                00101 _00107_DS_:
                      00102 ;       .line   42; stdlib/calloc.c     while (len) {
00004A 5000           00103         MOVF    r0x00, W
00004C E000           00104         BZ      _00111_DS_
                      00105 ; ;ic:17:       iTemp5 [k12 lr12:20 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char fixed}[r0x00 ] = iTemp5 [k12 lr12:20 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char fixed}[r0x00 ] - 0x1 {const-unsigned-char literal}
                      00106 ;       .line   43; stdlib/calloc.c     --len;
gpasm-0.14.1 (Aug 18 2017)   calloc.asm         8-18-2017  19:21:50          PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00004E 0600           00107         DECF    r0x00, F
                      00108 ; ;ic:18:       *(iTemp8 [k15 lr13:20 so:0]{ ia1 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char near* fixed}[r0x01 r0x02 ]) := 0x0 {const-unsigned-char literal}
                      00109 ;       .line   44; stdlib/calloc.c     *ch = 0;
000050 C000 FFE9      00110         MOVFF   r0x01, FSR0L
000054 C000 FFEA      00111         MOVFF   r0x02, FSR0H
000058 6AEF           00112         CLRF    INDF0
                      00113 ; ;ic:19:       iTemp8 [k15 lr13:20 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char near* fixed}[r0x01 r0x02 ] = iTemp8 [k15 lr13:20 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char near* fixed}[r0x01 r0x02 ] + 0x1 {const-unsigned-char literal}
                      00114 ;       .line   45; stdlib/calloc.c     ch++;
00005A 4A00           00115         INFSNZ  r0x01, F
00005C 2A00           00116         INCF    r0x02, F
                      00117 ; ;ic:20:        goto _whilecontinue_0($3)
00005E D000           00118         BRA     _00107_DS_
                      00119 ; ;ic:21:  _iffalse_1($7) :
                      00120 ; ;ic:22:       ret iTemp4 [k10 lr10:22 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char near* fixed}{ sir@ _calloc_result_1_10}[r0x03 r0x04 ]
000060                00121 _00111_DS_:
                      00122 ;       .line   49; stdlib/calloc.c     return (result);
000060 C000 FFF3      00123         MOVFF   r0x04, PRODL
000064 5000           00124         MOVF    r0x03, W
                      00125 ; ;ic:23:  _return($8) :
                      00126 ; ;ic:24:       eproc _calloc [k1 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char near* function ( unsigned-char fixed) data}
000066                00127 _00112_DS_:
000066 CFE4 F000      00128         MOVFF   PREINC1, r0x04
00006A CFE4 F000      00129         MOVFF   PREINC1, r0x03
00006E CFE4 F000      00130         MOVFF   PREINC1, r0x02
000072 CFE4 F000      00131         MOVFF   PREINC1, r0x01
000076 CFE4 F000      00132         MOVFF   PREINC1, r0x00
00007A CFE4 FFD9      00133         MOVFF   PREINC1, FSR2L
00007E 0012           00134         RETURN  
                      00135 
                      00136 
                      00137 
                      00138 ; Statistics:
                      00139 ; code size:      128 (0x0080) bytes ( 0.10%)
                      00140 ;                  64 (0x0040) words
                      00141 ; udata size:       0 (0x0000) bytes ( 0.00%)
                      00142 ; access size:      5 (0x0005) bytes
                      00143 
                      00144 
                      00145         end
gpasm-0.14.1 (Aug 18 2017)   calloc.asm         8-18-2017  19:21:50          PAGE  4


SYMBOL TABLE
  LABEL                             VALUE

FSR0H                             00000FEA
FSR0L                             00000FE9
FSR1L                             00000FE1
FSR2L                             00000FD9
INDF0                             00000FEF
PLUSW2                            00000FDB
POSTDEC1                          00000FE5
POSTINC1                          00000FE6
PREINC1                           00000FE4
PRODL                             00000FF3
STATUS                            00000FD8
WREG                              00000FE8
_00106_DS_                        0000002E
_00107_DS_                        0000004A
_00111_DS_                        00000060
_00112_DS_                        00000066
__18F452                          00000001
_calloc                           00000000
_heap                             00000000
_malloc                           00000000
r0x00                             00000000
r0x01                             00000001
r0x02                             00000002
r0x03                             00000003
r0x04                             00000004

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,     0 suppressed


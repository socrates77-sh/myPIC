gpasm-0.14.1 (Aug 18 2017)   memfreemax.asm     8-18-2017  19:21:57          PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;--------------------------------------------------------
                      00002 ; File Created by SDCC : free open source ANSI-C Compiler
                      00003 ; Version 3.2.0 #8004 (Aug 18 2017) (MINGW32)
                      00004 ; This file was generated Fri Aug 18 19:21:57 2017
                      00005 ;--------------------------------------------------------
                      00006 ; PIC16 port for the Microchip 16-bit core micros
                      00007 ;--------------------------------------------------------
                      00008         list    p=18f452
                      00009 
                      00010         radix dec
                      00011 
                      00012 ;--------------------------------------------------------
                      00013 ; public variables in this module
                      00014 ;--------------------------------------------------------
                      00015         global  _memfreemax
                      00016 
                      00017 ;--------------------------------------------------------
                      00018 ; extern variables in this module
                      00019 ;--------------------------------------------------------
                      00020         extern  _heap
                      00021 
                      00022 ;--------------------------------------------------------
                      00023 ;       Equates to used internal registers
                      00024 ;--------------------------------------------------------
  00000FD8            00025 STATUS  equ     0xfd8
  00000FE8            00026 WREG    equ     0xfe8
  00000FE9            00027 FSR0L   equ     0xfe9
  00000FEA            00028 FSR0H   equ     0xfea
  00000FEF            00029 INDF0   equ     0xfef
  00000FE5            00030 POSTDEC1        equ     0xfe5
  00000FE4            00031 PREINC1 equ     0xfe4
  00000FF3            00032 PRODL   equ     0xff3
                      00033 
                      00034 
                      00035 ; Internal registers
                      00036 .registers      udata_ovr       0x0000
000000                00037 r0x00   res     1
000001                00038 r0x01   res     1
000002                00039 r0x02   res     1
000003                00040 r0x03   res     1
000004                00041 r0x04   res     1
000005                00042 r0x05   res     1
000006                00043 r0x06   res     1
                      00044 
                      00045 ;--------------------------------------------------------
                      00046 ; global & static initialisations
                      00047 ;--------------------------------------------------------
                      00048 ; I code from now on!
                      00049 ; ; Starting pCode block
                      00050 ; ;ic:1:  _entry($8) :
                      00051 ; ;ic:2:        proc _memfreemax [k1 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-int function ( ) fixed}
                      00052 S_memfreemax__memfreemax        code
000000                00053 _memfreemax:
gpasm-0.14.1 (Aug 18 2017)   memfreemax.asm     8-18-2017  19:21:57          PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00054 ;       .line   33; stdlib/memfreemax.c unsigned int memfreemax(void)
000000 C000 FFE5      00055         MOVFF   r0x00, POSTDEC1
000004 C000 FFE5      00056         MOVFF   r0x01, POSTDEC1
000008 C000 FFE5      00057         MOVFF   r0x02, POSTDEC1
00000C C000 FFE5      00058         MOVFF   r0x03, POSTDEC1
000010 C000 FFE5      00059         MOVFF   r0x04, POSTDEC1
000014 C000 FFE5      00060         MOVFF   r0x05, POSTDEC1
000018 C000 FFE5      00061         MOVFF   r0x06, POSTDEC1
                      00062 ; ;ic:3:        iTemp0 [k2 lr3:27 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _memfreemax_maxSize_1_10}[r0x00 ] := 0x1 {const-unsigned-char literal}
                      00063 ;       .line   36; stdlib/memfreemax.c unsigned char maxSize = 1;
00001C 0E01           00064         MOVLW   0x01
00001E 6E00           00065         MOVWF   r0x00
                      00066 ; ;ic:4:        iTemp2 [k7 lr4:5 so:0]{ ia0 a2p0 re0 rm1 nos0 ru0 dp0}{unsigned-char near* near* fixed}[remat] = &[_heap [k6 lr0:0 so:0]{ ia1 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-char near* fixed}]
                      00067 ; ;ic:5:        iTemp1 [k4 lr5:24 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{struct __00000000 near* fixed}{ sir@ _memfreemax_pHeap_1_10}[r0x01 r0x02 ] = (struct __00000000 near* fixed)iTemp2 [k7 lr4:5 so:0]{ ia0 a2p0 re0 rm1 nos0 ru0 dp0}{unsigned-char near* near* fixed}[remat]
                      00068 ;       .line   39; stdlib/memfreemax.c pHeap = (_malloc_rec _MALLOC_SPEC *)&heap;
000020 0E00           00069         MOVLW   LOW(_heap)
000022 6E00           00070         MOVWF   r0x01
000024 0E00           00071         MOVLW   HIGH(_heap)
000026 6E00           00072         MOVWF   r0x02
                      00073 ; ;ic:7:  _whilecontinue_0($4) :
                      00074 ; ;ic:8:        iTemp7 [k15 lr8:9 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{volatile-unsigned-bitfield {0,7} near* fixed}[r0x03 r0x04 ] := iTemp1 [k4 lr5:24 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{struct __00000000 near* fixed}{ sir@ _memfreemax_pHeap_1_10}[r0x01 r0x02 ]
000028                00075 _00108_DS_:
                      00076 ;       .line   41; stdlib/memfreemax.c while ((bLen = pHeap->bits.count)) {
000028 C000 F000      00077         MOVFF   r0x01, r0x03
00002C C000 F000      00078         MOVFF   r0x02, r0x04
                      00079 ; ;ic:9:        iTemp8 [k16 lr9:11 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{volatile-unsigned-bitfield {0,7} fixed}[r0x03 ] = @[iTemp7 [k15 lr8:9 so:0]{ ia1 a2p0 re0 rm0 nos0 ru0 dp0}{volatile-unsigned-bitfield {0,7} near* fixed}[r0x03 r0x04 ] + 0x0 {const-unsigned-char literal}]
000030 C000 FFE9      00080         MOVFF   r0x03, FSR0L
000034 C000 FFEA      00081         MOVFF   r0x04, FSR0H
000038 50EF           00082         MOVF    INDF0, W
00003A 0B7F           00083         ANDLW   0x7f
00003C 6E00           00084         MOVWF   r0x03
                      00085 ; ;ic:10:       iTemp4 [k9 lr10:20 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _memfreemax_bLen_1_10}[r0x04 ] := iTemp8 [k16 lr9:11 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{volatile-unsigned-bitfield {0,7} fixed}[r0x03 ]
00003E C000 F000      00086         MOVFF   r0x03, r0x04
                      00087 ; ;ic:11:       if iTemp8 [k16 lr9:11 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{volatile-unsigned-bitfield {0,7} fixed}[r0x03 ] == 0 goto _whilebreak_0($6)
000042 5000           00088         MOVF    r0x03, W
000044 E000           00089         BZ      _00110_DS_
                      00090 ; ;ic:12:       iTemp11 [k21 lr12:13 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{volatile-unsigned-bitfield {7,1} near* fixed}[r0x03 r0x05 ] := iTemp1 [k4 lr5:24 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{struct __00000000 near* fixed}{ sir@ _memfreemax_pHeap_1_10}[r0x01 r0x02 ]
                      00091 ;       .line   42; stdlib/memfreemax.c if(!pHeap->bits.alloc && (bLen > maxSize))
000046 C000 F000      00092         MOVFF   r0x01, r0x03
00004A C000 F000      00093         MOVFF   r0x02, r0x05
                      00094 ; ;ic:13:       iTemp12 [k22 lr13:14 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{volatile-unsigned-bitfield {7,1} fixed}[r0x03 ] = @[iTemp11 [k21 lr12:13 so:0]{ ia1 a2p0 re0 rm0 nos0 ru0 dp0}{volatile-unsigned-bitfield {7,1} near* fixed}[r0x03 r0x05 ] + 0x0 {const-unsigned-char literal}]
00004E 6AE8           00095         CLRF    WREG
000050 C000 FFE9      00096         MOVFF   r0x03, FSR0L
000054 C000 FFEA      00097         MOVFF   r0x05, FSR0H
000058 BEEF           00098         BTFSC   INDF0, 7
00005A 2AE8           00099         INCF    WREG, F
00005C 6E00           00100         MOVWF   r0x03
                      00101 ; ;ic:14:       if iTemp12 [k22 lr13:14 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{volatile-unsigned-bitfield {7,1} fixed}[r0x03 ] != 0 goto _iffalse_0($2)
00005E 5000           00102         MOVF    r0x03, W
000060 E100           00103         BNZ     _00106_DS_
                      00104 ; ;ic:15:       iTemp13 [k23 lr15:16 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{char fixed} = iTemp4 [k9 lr10:20 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _memfreemax_bLen_1_10}[r0x04 ] > iTemp0 [k2 lr3:27 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _memfreemax_maxSize_1_10}[r0x00 ]
000062 5000           00105         MOVF    r0x04, W
                      00106 ; #     SUBWF   r0x00, W
gpasm-0.14.1 (Aug 18 2017)   memfreemax.asm     8-18-2017  19:21:57          PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00107 ; #     BTFSC   STATUS, 0
                      00108 ; #     GOTO    _00106_DS_
                      00109 ; #;;ic:16:     if iTemp13 [k23 lr15:16 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{char fixed} == 0 goto _iffalse_0($2)
                      00110 ; #;;ic:17:     iTemp0 [k2 lr3:27 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _memfreemax_maxSize_1_10}[r0x00 ] := iTemp4 [k9 lr10:20 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _memfreemax_bLen_1_10}[r0x04 ]
                      00111 ; #     MOVFF   r0x04, r0x00
                      00112 ; #;;ic:18:  _iffalse_0($2) :
                      00113 ; #;;ic:19:     iTemp14 [k24 lr19:22 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-int fixed}[r0x03 r0x05 ] = (unsigned-int fixed)iTemp1 [k4 lr5:24 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{struct __00000000 near* fixed}{ sir@ _memfreemax_pHeap_1_10}[r0x01 r0x02 ]
                      00114 ; #     MOVF    r0x01, W
                      00115 ;       .line   43; stdlib/memfreemax.c maxSize = bLen;
000064 5C00           00116         SUBWF   r0x00, W
                      00117 ;       .line   45; stdlib/memfreemax.c pHeap = (_malloc_rec _MALLOC_SPEC *)((unsigned int)pHeap + bLen);
000066 A0D8           00118         BTFSS   STATUS, 0
000068 C000 F000      00119         MOVFF   r0x04, r0x00
00006C                00120 _00106_DS_:
00006C 5000           00121         MOVF    r0x01, W
00006E 6E00           00122         MOVWF   r0x03
000070 5000           00123         MOVF    r0x02, W
000072 6E00           00124         MOVWF   r0x05
                      00125 ; ;ic:20:       iTemp15 [k25 lr20:21 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{int fixed}[r0x04 r0x06 ] = (int fixed)iTemp4 [k9 lr10:20 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _memfreemax_bLen_1_10}[r0x04 ]
000074 6A00           00126         CLRF    r0x06
                      00127 ; ;ic:21:       iTemp16 [k26 lr21:22 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-int fixed}[r0x04 r0x06 ] = (unsigned-int fixed)iTemp15 [k25 lr20:21 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{int fixed}[r0x04 r0x06 ]
                      00128 ; ;ic:22:       iTemp17 [k27 lr22:23 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-int fixed}[r0x03 r0x05 ] = iTemp14 [k24 lr19:22 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-int fixed}[r0x03 r0x05 ] + iTemp16 [k26 lr21:22 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-int fixed}[r0x04 r0x06 ]
000076 5000           00129         MOVF    r0x04, W
000078 2600           00130         ADDWF   r0x03, F
00007A 5000           00131         MOVF    r0x06, W
00007C 2200           00132         ADDWFC  r0x05, F
                      00133 ; ;ic:23:       iTemp1 [k4 lr5:24 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{struct __00000000 near* fixed}{ sir@ _memfreemax_pHeap_1_10}[r0x01 r0x02 ] = (struct __00000000 near* fixed)iTemp17 [k27 lr22:23 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-int fixed}[r0x03 r0x05 ]
00007E 5000           00134         MOVF    r0x03, W
000080 6E00           00135         MOVWF   r0x01
000082 5000           00136         MOVF    r0x05, W
000084 6E00           00137         MOVWF   r0x02
                      00138 ; ;ic:24:        goto _whilecontinue_0($4)
000086 D000           00139         BRA     _00108_DS_
                      00140 ; ;ic:25:  _whilebreak_0($6) :
                      00141 ; ;ic:26:       iTemp0 [k2 lr3:27 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _memfreemax_maxSize_1_10}[r0x00 ] = iTemp0 [k2 lr3:27 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _memfreemax_maxSize_1_10}[r0x00 ] - 0x1 {const-unsigned-char literal}
000088                00142 _00110_DS_:
                      00143 ;       .line   49; stdlib/memfreemax.c --maxSize;
000088 0600           00144         DECF    r0x00, F
                      00145 ; ;ic:27:       iTemp20 [k30 lr27:28 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-int fixed}[r0x00 r0x01 ] = (unsigned-int fixed)iTemp0 [k2 lr3:27 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char fixed}{ sir@ _memfreemax_maxSize_1_10}[r0x00 ]
                      00146 ; ;ic:28:       ret iTemp20 [k30 lr27:28 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-int fixed}[r0x00 r0x01 ]
                      00147 ; =DF= MOVFF: replaced by CRLF/SETF
                      00148 ;       .line   51; stdlib/memfreemax.c return (maxSize);
00008A 6AF3           00149         CLRF    PRODL
00008C 5000           00150         MOVF    r0x00, W
                      00151 ; ;ic:29:  _return($7) :
                      00152 ; ;ic:30:       eproc _memfreemax [k1 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{unsigned-int function ( ) fixed}
00008E CFE4 F000      00153         MOVFF   PREINC1, r0x06
000092 CFE4 F000      00154         MOVFF   PREINC1, r0x05
000096 CFE4 F000      00155         MOVFF   PREINC1, r0x04
00009A CFE4 F000      00156         MOVFF   PREINC1, r0x03
00009E CFE4 F000      00157         MOVFF   PREINC1, r0x02
0000A2 CFE4 F000      00158         MOVFF   PREINC1, r0x01
0000A6 CFE4 F000      00159         MOVFF   PREINC1, r0x00
gpasm-0.14.1 (Aug 18 2017)   memfreemax.asm     8-18-2017  19:21:57          PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0000AA 0012           00160         RETURN  
                      00161 
                      00162 
                      00163 
                      00164 ; Statistics:
                      00165 ; code size:      172 (0x00ac) bytes ( 0.13%)
                      00166 ;                  86 (0x0056) words
                      00167 ; udata size:       0 (0x0000) bytes ( 0.00%)
                      00168 ; access size:      7 (0x0007) bytes
                      00169 
                      00170 
                      00171         end
gpasm-0.14.1 (Aug 18 2017)   memfreemax.asm     8-18-2017  19:21:57          PAGE  5


SYMBOL TABLE
  LABEL                             VALUE

FSR0H                             00000FEA
FSR0L                             00000FE9
INDF0                             00000FEF
POSTDEC1                          00000FE5
PREINC1                           00000FE4
PRODL                             00000FF3
STATUS                            00000FD8
WREG                              00000FE8
_00106_DS_                        0000006C
_00108_DS_                        00000028
_00110_DS_                        00000088
__18F452                          00000001
_heap                             00000000
_memfreemax                       00000000
r0x00                             00000000
r0x01                             00000001
r0x02                             00000002
r0x03                             00000003
r0x04                             00000004
r0x05                             00000005
r0x06                             00000006

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,     0 suppressed


gpasm-0.14.1 (Aug 18 2017)   vprintf.asm        8-18-2017  19:21:45          PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;--------------------------------------------------------
                      00002 ; File Created by SDCC : free open source ANSI-C Compiler
                      00003 ; Version 3.2.0 #8004 (Aug 18 2017) (MINGW32)
                      00004 ; This file was generated Fri Aug 18 19:21:45 2017
                      00005 ;--------------------------------------------------------
                      00006 ; PIC16 port for the Microchip 16-bit core micros
                      00007 ;--------------------------------------------------------
                      00008         list    p=18f452
                      00009 
                      00010         radix dec
                      00011 
                      00012 ;--------------------------------------------------------
                      00013 ; public variables in this module
                      00014 ;--------------------------------------------------------
                      00015         global  _vprintf
                      00016 
                      00017 ;--------------------------------------------------------
                      00018 ; extern variables in this module
                      00019 ;--------------------------------------------------------
                      00020         extern  _stdin
                      00021         extern  _stdout
                      00022         extern  _vfprintf
                      00023 
                      00024 ;--------------------------------------------------------
                      00025 ;       Equates to used internal registers
                      00026 ;--------------------------------------------------------
  00000FE8            00027 WREG    equ     0xfe8
  00000FE1            00028 FSR1L   equ     0xfe1
  00000FD9            00029 FSR2L   equ     0xfd9
  00000FE5            00030 POSTDEC1        equ     0xfe5
  00000FE4            00031 PREINC1 equ     0xfe4
  00000FDB            00032 PLUSW2  equ     0xfdb
  00000FF3            00033 PRODL   equ     0xff3
                      00034 
                      00035 
                      00036 ; Internal registers
                      00037 .registers      udata_ovr       0x0000
000000                00038 r0x00   res     1
000001                00039 r0x01   res     1
000002                00040 r0x02   res     1
000003                00041 r0x03   res     1
000004                00042 r0x04   res     1
000005                00043 r0x05   res     1
                      00044 
                      00045 ;--------------------------------------------------------
                      00046 ; global & static initialisations
                      00047 ;--------------------------------------------------------
                      00048 ; I code from now on!
                      00049 ; ; Starting pCode block
                      00050 ; ;ic:1:  _entry($2) :
                      00051 ; ;ic:2:        proc _vprintf [k1 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{int function ( const-char generic* fixed, unsigned-char generic* fixed) fixed}
                      00052 S_vprintf__vprintf      code
000000                00053 _vprintf:
gpasm-0.14.1 (Aug 18 2017)   vprintf.asm        8-18-2017  19:21:45          PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00054 ;       .line   33; stdio/vprintf.c     vprintf (const char *fmt, va_list ap)
000000 CFD9 FFE5      00055         MOVFF   FSR2L, POSTDEC1
000004 CFE1 FFD9      00056         MOVFF   FSR1L, FSR2L
000008 C000 FFE5      00057         MOVFF   r0x00, POSTDEC1
00000C C000 FFE5      00058         MOVFF   r0x01, POSTDEC1
000010 C000 FFE5      00059         MOVFF   r0x02, POSTDEC1
000014 C000 FFE5      00060         MOVFF   r0x03, POSTDEC1
000018 C000 FFE5      00061         MOVFF   r0x04, POSTDEC1
00001C C000 FFE5      00062         MOVFF   r0x05, POSTDEC1
                      00063 ; ;ic:3: iTemp0 [k2 lr3:7 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{const-char generic* fixed}{ sir@ _vprintf_fmt_1_16}[r0x00 r0x01 r0x02 ] = recv _vprintf [k1 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{int function ( const-char generic* fixed, unsigned-char generic* fixed) fixed}
000020 0E02           00064         MOVLW   0x02
000022 CFDB F000      00065         MOVFF   PLUSW2, r0x00
000026 0E03           00066         MOVLW   0x03
000028 CFDB F000      00067         MOVFF   PLUSW2, r0x01
00002C 0E04           00068         MOVLW   0x04
00002E CFDB F000      00069         MOVFF   PLUSW2, r0x02
                      00070 ; ;ic:4: iTemp1 [k4 lr4:7 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char generic* fixed}{ sir@ _vprintf_ap_1_16}[r0x03 r0x04 r0x05 ] = recv _vprintf [k1 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{int function ( const-char generic* fixed, unsigned-char generic* fixed) fixed}
000032 0E05           00071         MOVLW   0x05
000034 CFDB F000      00072         MOVFF   PLUSW2, r0x03
000038 0E06           00073         MOVLW   0x06
00003A CFDB F000      00074         MOVFF   PLUSW2, r0x04
00003E 0E07           00075         MOVLW   0x07
000040 CFDB F000      00076         MOVFF   PLUSW2, r0x05
                      00077 ; ;ic:5:        send _stdout [k7 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{char generic* generic* fixed}{argreg = 1}
                      00078 ; ;ic:6:        send iTemp0 [k2 lr3:7 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{const-char generic* fixed}{ sir@ _vprintf_fmt_1_16}[r0x00 r0x01 r0x02 ]{argreg = 2}
                      00079 ; ;ic:7:        send iTemp1 [k4 lr4:7 so:0]{ ia0 a2p0 re1 rm0 nos0 ru0 dp0}{unsigned-char generic* fixed}{ sir@ _vprintf_ap_1_16}[r0x03 r0x04 r0x05 ]{argreg = 3}
                      00080 ; ;ic:8:        iTemp2 [k11 lr8:9 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{int fixed}[r0x00 r0x01 ] = call _vfprintf [k6 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{int function ( char generic* generic* fixed, const-char generic* fixed, unsigned-char generic* fixed) fixed}
                      00081 ;       .line   35; stdio/vprintf.c     return vfprintf (stdout, fmt, ap);
000044 5000           00082         MOVF    r0x05, W
000046 6EE5           00083         MOVWF   POSTDEC1
000048 5000           00084         MOVF    r0x04, W
00004A 6EE5           00085         MOVWF   POSTDEC1
00004C 5000           00086         MOVF    r0x03, W
00004E 6EE5           00087         MOVWF   POSTDEC1
000050 5000           00088         MOVF    r0x02, W
000052 6EE5           00089         MOVWF   POSTDEC1
000054 5000           00090         MOVF    r0x01, W
000056 6EE5           00091         MOVWF   POSTDEC1
000058 5000           00092         MOVF    r0x00, W
00005A 6EE5           00093         MOVWF   POSTDEC1
00005C 0100           00094         BANKSEL (_stdout + 2)
00005E 5100           00095         MOVF    (_stdout + 2), W, B
000060 6EE5           00096         MOVWF   POSTDEC1
                      00097 ; removed redundant BANKSEL
000062 5100           00098         MOVF    (_stdout + 1), W, B
000064 6EE5           00099         MOVWF   POSTDEC1
                      00100 ; removed redundant BANKSEL
000066 5100           00101         MOVF    _stdout, W, B
000068 6EE5           00102         MOVWF   POSTDEC1
00006A EC00 F000      00103         CALL    _vfprintf
00006E 6E00           00104         MOVWF   r0x00
000070 CFF3 F000      00105         MOVFF   PRODL, r0x01
000074 0E09           00106         MOVLW   0x09
gpasm-0.14.1 (Aug 18 2017)   vprintf.asm        8-18-2017  19:21:45          PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000076 26E1           00107         ADDWF   FSR1L, F
                      00108 ; ;ic:9:        ret iTemp2 [k11 lr8:9 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{int fixed}[r0x00 r0x01 ]
000078 C000 FFF3      00109         MOVFF   r0x01, PRODL
00007C 5000           00110         MOVF    r0x00, W
                      00111 ; ;ic:10:  _return($1) :
                      00112 ; ;ic:11:       eproc _vprintf [k1 lr0:0 so:0]{ ia0 a2p0 re0 rm0 nos0 ru0 dp0}{int function ( const-char generic* fixed, unsigned-char generic* fixed) fixed}
00007E CFE4 F000      00113         MOVFF   PREINC1, r0x05
000082 CFE4 F000      00114         MOVFF   PREINC1, r0x04
000086 CFE4 F000      00115         MOVFF   PREINC1, r0x03
00008A CFE4 F000      00116         MOVFF   PREINC1, r0x02
00008E CFE4 F000      00117         MOVFF   PREINC1, r0x01
000092 CFE4 F000      00118         MOVFF   PREINC1, r0x00
000096 CFE4 FFD9      00119         MOVFF   PREINC1, FSR2L
00009A 0012           00120         RETURN  
                      00121 
                      00122 
                      00123 
                      00124 ; Statistics:
                      00125 ; code size:      156 (0x009c) bytes ( 0.12%)
                      00126 ;                  78 (0x004e) words
                      00127 ; udata size:       0 (0x0000) bytes ( 0.00%)
                      00128 ; access size:      6 (0x0006) bytes
                      00129 
                      00130 
                      00131         end
gpasm-0.14.1 (Aug 18 2017)   vprintf.asm        8-18-2017  19:21:45          PAGE  4


SYMBOL TABLE
  LABEL                             VALUE

FSR1L                             00000FE1
FSR2L                             00000FD9
PLUSW2                            00000FDB
POSTDEC1                          00000FE5
PREINC1                           00000FE4
PRODL                             00000FF3
WREG                              00000FE8
__18F452                          00000001
_stdin                            00000000
_stdout                           00000000
_vfprintf                         00000000
_vprintf                          00000000
r0x00                             00000000
r0x01                             00000001
r0x02                             00000002
r0x03                             00000003
r0x04                             00000004
r0x05                             00000005

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,     0 suppressed

